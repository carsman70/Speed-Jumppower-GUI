-- Version 2: Loop-based Initialization
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Loop until PlayerGui exists (retry logic)
local playerGui = player:FindFirstChild("PlayerGui")
while not playerGui do
    wait(0.1)
    playerGui = player:FindFirstChild("PlayerGui")
end

-- The rest is the same UI setup as Version 1:
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CustomGUI"
screenGui.Parent = playerGui

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 300, 0, 250)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -125)
mainFrame.BackgroundColor3 = Color3.new(0, 0, 0)
mainFrame.BackgroundTransparency = 1
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui
local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 10)
frameCorner.Parent = mainFrame

local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 30)
titleBar.Position = UDim2.new(0, 0, 0, 0)
titleBar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
titleBar.BackgroundTransparency = 1
titleBar.Parent = mainFrame

local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "TitleLabel"
titleLabel.Size = UDim2.new(1, -100, 1, 0)
titleLabel.Position = UDim2.new(0, 5, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "My GUI"
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.Font = Enum.Font.SourceSansBold
titleLabel.TextSize = 18
titleLabel.TextXAlignment = Enum.TextXAlignment.Left
titleLabel.Parent = titleBar

local minBtn = Instance.new("TextButton")
minBtn.Name = "MinimizeButton"
minBtn.Size = UDim2.new(0, 20, 0, 20)
minBtn.Position = UDim2.new(1, -60, 0, 5)
minBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
minBtn.Text = "-"
minBtn.TextColor3 = Color3.new(1, 1, 1)
minBtn.Font = Enum.Font.SourceSansBold
minBtn.TextSize = 18
minBtn.Parent = titleBar

local closeBtn = Instance.new("TextButton")
closeBtn.Name = "CloseButton"
closeBtn.Size = UDim2.new(0, 20, 0, 20)
closeBtn.Position = UDim2.new(1, -30, 0, 5)
closeBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.new(1, 1, 1)
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.TextSize = 18
closeBtn.Parent = titleBar

local discordBtn = Instance.new("TextButton")
discordBtn.Name = "DiscordButton"
discordBtn.Size = UDim2.new(0, 60, 0, 20)
discordBtn.Position = UDim2.new(1, -130, 0, 5)
discordBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
discordBtn.Text = "Discord"
discordBtn.TextColor3 = Color3.new(1, 1, 1)
discordBtn.Font = Enum.Font.SourceSans
discordBtn.TextSize = 14
discordBtn.Parent = titleBar

local contentFrame = Instance.new("Frame")
contentFrame.Name = "ContentFrame"
contentFrame.Size = UDim2.new(1, 0, 1, -30)
contentFrame.Position = UDim2.new(0, 0, 0, 30)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainFrame

local speedLabel = Instance.new("TextLabel")
speedLabel.Name = "SpeedLabel"
speedLabel.Size = UDim2.new(0, 60, 0, 20)
speedLabel.Position = UDim2.new(0, 10, 0, 10)
speedLabel.BackgroundTransparency = 1
speedLabel.Text = "Speed"
speedLabel.TextColor3 = Color3.new(1, 1, 1)
speedLabel.Font = Enum.Font.SourceSans
speedLabel.TextSize = 14
speedLabel.TextXAlignment = Enum.TextXAlignment.Left
speedLabel.Parent = contentFrame

local speedSlider = Instance.new("Frame")
speedSlider.Name = "SpeedSlider"
speedSlider.Size = UDim2.new(0, 200, 0, 10)
speedSlider.Position = UDim2.new(0, 80, 0, 15)
speedSlider.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
speedSlider.BackgroundTransparency = 1
speedSlider.Parent = contentFrame
local speedCorner = Instance.new("UICorner")
speedCorner.CornerRadius = UDim.new(0, 5)
speedCorner.Parent = speedSlider

local speedThumb = Instance.new("Frame")
speedThumb.Name = "SpeedThumb"
speedThumb.Size = UDim2.new(0, 10, 0, 20)
speedThumb.Position = UDim2.new(0, 0, 0, -5)
speedThumb.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
speedThumb.Parent = speedSlider
local thumbCorner1 = Instance.new("UICorner")
thumbCorner1.CornerRadius = UDim.new(0, 5)
thumbCorner1.Parent = speedThumb

local jumpLabel = Instance.new("TextLabel")
jumpLabel.Name = "JumpLabel"
jumpLabel.Size = UDim2.new(0, 80, 0, 20)
jumpLabel.Position = UDim2.new(0, 10, 0, 50)
jumpLabel.BackgroundTransparency = 1
jumpLabel.Text = "Jump Power"
jumpLabel.TextColor3 = Color3.new(1, 1, 1)
jumpLabel.Font = Enum.Font.SourceSans
jumpLabel.TextSize = 14
jumpLabel.TextXAlignment = Enum.TextXAlignment.Left
jumpLabel.Parent = contentFrame

local jumpSlider = Instance.new("Frame")
jumpSlider.Name = "JumpSlider"
jumpSlider.Size = UDim2.new(0, 200, 0, 10)
jumpSlider.Position = UDim2.new(0, 100, 0, 55)
jumpSlider.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
jumpSlider.BackgroundTransparency = 1
jumpSlider.Parent = contentFrame
local jumpCorner = Instance.new("UICorner")
jumpCorner.CornerRadius = UDim.new(0, 5)
jumpCorner.Parent = jumpSlider

local jumpThumb = Instance.new("Frame")
jumpThumb.Name = "JumpThumb"
jumpThumb.Size = UDim2.new(0, 10, 0, 20)
jumpThumb.Position = UDim2.new(0, 0, 0, -5)
jumpThumb.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
jumpThumb.Parent = jumpSlider
local thumbCorner2 = Instance.new("UICorner")
thumbCorner2.CornerRadius = UDim.new(0, 5)
thumbCorner2.Parent = jumpThumb

local revertBtn = Instance.new("TextButton")
revertBtn.Name = "RevertButton"
revertBtn.Size = UDim2.new(0, 100, 0, 30)
revertBtn.Position = UDim2.new(0.5, -50, 1, -40)
revertBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
revertBtn.Text = "Revert"
revertBtn.TextColor3 = Color3.new(1, 1, 1)
revertBtn.Font = Enum.Font.SourceSansBold
revertBtn.TextSize = 18
revertBtn.Parent = contentFrame

-- (TweenService, initial values, update functions, dragging logic, and fade logic same as above)
